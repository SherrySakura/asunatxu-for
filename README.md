[TOC]

# AsunaTux前端开发文档

## 1 简介

### 1.1 功能说明

AsunaTux工具为针对在校研究生（博士）或本科生在阅读文献时开发的辅助工具，充分利用目前云的优势，将方便的小工具整合到浏览器中，随时随地可以使用，无需安装或配置。具体功能如下：

- 核心功能
  - ==删除文本中多余的换行符==：在PDF等主流文献格式复制时，会经常多出换行符，在摘抄整理翻译时会被换行符干扰，降低阅读效率，该工具可以自动删除文本中多余的换行符；
  - ==删除文本中的文献引用符号==：若复制的文献为其综述部分，往往会带有文献的引用符号，例如：[1]。该工具可以自动删除文本中的文献引用符号；
  - ==翻译文本==：可以实现文本的中英翻译和英中翻译，前提需要登录
- 用户管理功能
  - ==登录==：允许用户实现登录，保持登录操作；
  - ==注册==：允许用户实现注册账号操作，并且提供前端方向的重复密码验证和邮箱正确性验证
  - ==退出登录==：用户可以主动退出登录

### 1.2 主要技术栈和框架说明

AsunaTxu前端部分主要采用```Vue```框架构建，版本为```Vue3.x```。UI部分采用```iview```框架，针对于ajax请求，采用了```axios```库。针对未来的RSA加密功能，目前引入了```JSEncrypt```库。所有框架均通过npm安装，利用webpack进行管理。并且，所有第三方库的版本管理均位于项目根目录下的```package.json```中。并且，所有下载的第三方库位于项目根目录的```node_modules```文件夹中。

> 注意：若出现版本冲突，或者拷贝后第三方库在编译时出现依赖错误，可以选择删除```node_nodules```文件夹，然后再通过命令行运行```npm install```进行重新下载。**切记，不可删除```package.json```文件**

### 1.3 工程目录大纲

- ```css```：存放基础共用样式文件
- ```js```：存放自定义js脚本文件
- ```node_modules```：存放下载的第三方库
- ```public```：存放主页图标和工程主页(index.html)
- ```src```：存放工程的核心代码部分
  - ```assets```：静态资源，例如图片等
  - ```components```：针对Vue的自定义组件
  - ```App.vue```：入口组件
  - ```main.js```：入口js文件
- ```package.json```：所有项目所依赖的第三方库的引用说明以及项目的基础配置
- ```babel.config.js```：针对适配ES6的babel库的配置文件

## 2 公用JS文件说明

###2.1 cipher.js(未启用)

该文件为加密功能具体实现，其中包含获取服务端秘钥和加密两个函数，该文件所使用到的第三方库如下：

```javascript
import JSEncrypt from 'jsencrypt'
import cookie from "./cookie"
import axios from "axios"
```

1. 获取服务端秘钥

在首次使用该功能时需要判断本地cookie是否有公钥，若没有则需要从服务端获取。

| 函数名             | 参数 | 返回值 |
| :----------------- | ---- | ------ |
| ```getPublicKey``` | null | null   |

2. 加密文本

用户在登录和注册时需要把密码加密后上传，前提是已经获取到了服务端的公钥。

| 函数名        | 参数                                                         | 返回值       |
| ------------- | ------------------------------------------------------------ | ------------ |
| ```encrypt``` | ```text```：待加密的文本<br />```publickey```：所使用的的公钥 | 加密后的文本 |

### 2.2 cookie.js

该文件为对cookie的操作，包括读取特定cookie，删除特定cookie，设置cookie。

1. 读取特定cookie

| 函数名          | 参数                         | 返回值                     |
| --------------- | ---------------------------- | -------------------------- |
| ```getCookie``` | ```name```：要读取的cookie名 | cookie值，若没有，返回null |

2. 设置cookie

| 函数名          | 参数                                                         | 返回值 |
| --------------- | ------------------------------------------------------------ | ------ |
| ```setCookie``` | ```name```：cookie名<br>```value```：cookie值<br>```expair```：cookie生效时长<br>```unit```：时间单位，默认为==天== | null   |

3. 删除cookie

| 函数名             | 参数                         | 返回值 |
| ------------------ | ---------------------------- | ------ |
| ```deleteCookie``` | ```name```：要删除的cookie名 | null   |

4. 判断是否已经登录

| 函数名        | 参数 | 返回值                          |
| ------------- | ---- | ------------------------------- |
| ```isLogin``` | null | 是否已经登录，```boolean```类型 |

### 2.3 message.js

通知控制函数文件，包含有顶部弹出式定时通知和侧边栏可关闭式通知。

1. Toast通知

| 函数名      | 参数                                                         | 返回值 |
| ----------- | ------------------------------------------------------------ | ------ |
| ```toast``` | ```context```：传入需要显示通知的组件的this指针<br>```type```：通知的类型<br>```content```：通知内容 | null   |

2. Notice通知

| 函数名       | 参数                                                         | 返回值 |
| ------------ | ------------------------------------------------------------ | ------ |
| ```notice``` | ```context```：传入需要显示通知的组件的this指针<br/>```type```：通知的类型
```content```：通知内容，前提是```onlyTitle```为false<br>```onlyTitle```：是否仅标题<br>```title```：标题内容 | null   |

### 2.4 validate.js

通用验证函数，包括密码二次重复验证，邮箱正确性验证。

1. 密码重复验证

| 函数名                 | 参数                                             | 返回值                                          |
| ---------------------- | ------------------------------------------------ | ----------------------------------------------- |
| ```passwordValidate``` | ```ol```：第一次的文本<br>```ne```：第二次的文本 | 若相同，返回```true```<br>否则，返回```false``` |

2. 邮箱正确性验证

| 函数名             | 参数                 | 返回值                                          |
| ------------------ | -------------------- | ----------------------------------------------- |
| ```mailvalidate``` | ```mail```：邮箱文本 | 若正确，返回```true```<br>否则，返回```false``` |

